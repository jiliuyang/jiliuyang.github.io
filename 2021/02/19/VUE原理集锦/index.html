<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>VUE原理集锦 | 墨韵</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.1/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.1/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/2.0.4/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/2.1.4/toastr.min.css"><meta name="generator" content="Hexo 4.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">VUE原理集锦</h1><a id="logo" href="/.">墨韵</a><p class="description">泼墨世界，写意人生</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">VUE原理集锦</h1><div class="post-meta">2021-02-19</div><div class="post-content"><h3 id="一、v-model的原理及相关实现"><a href="#一、v-model的原理及相关实现" class="headerlink" title="一、v-model的原理及相关实现"></a>一、v-model的原理及相关实现</h3><p>v-model是VUE中的一个指令，也是vue框架的两个核心：双向绑定和组件化的其中一个，可以实现数据的双向绑定。</p>
<p>那么v-model实现双向绑定的原理是什么呢？</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">等价于</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">"name"</span> @<span class="attr">input</span>=<span class="string">"name = $event.target.value"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>从以上我们很容易观察到，v-model双向绑定的实现，其实就是一个简单的语法糖，一方面name属性值变化从而更新input的value值，另一方面绑定input事件去监听输入框的录入改变，将改变后的值再赋值给name属性值，从而形成一个闭环，以达到双向绑定的目的。</p>
<p>总的来说就是</p>
<h3 id="二、VUE的diff算法小解"><a href="#二、VUE的diff算法小解" class="headerlink" title="二、VUE的diff算法小解"></a>二、VUE的diff算法小解</h3><p>在谈diff算法之前，我们首先要知道虚拟dom这个概念，因为diff算法是依据虚拟dom来执行的。</p>
<h4 id="1、虚拟dom是什么呢？"><a href="#1、虚拟dom是什么呢？" class="headerlink" title="1、虚拟dom是什么呢？"></a>1、虚拟dom是什么呢？</h4><p>简单来说，虚拟dom(全称Virtual Dom)是一棵以javascript对象为基础的树，它用对象属性来描述节点，是对真实节点的一种抽象形式。而vue最终可以通过一系列操作将该虚拟dom树映射到真实的节点上。</p>
<h4 id="2、虚拟dom是怎么生成的？"><a href="#2、虚拟dom是怎么生成的？" class="headerlink" title="2、虚拟dom是怎么生成的？"></a>2、虚拟dom是怎么生成的？</h4><p>要明白虚拟dom的生成，我们需要先了解vue中模板到视图的转换过程：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">第一步：vue.js先通过编译将template模板转换成渲染函数（也就是render函数）</span><br><span class="line">第二步：调用渲染函数即可生成一个虚拟节点树</span><br><span class="line">第三步：patching算法是该过程中最关键也是最核心的一步，它可以将虚拟dom最终渲染成真实的节点。而在该渲染过程中，也用到了我们上面所提到的diff算法，以便于在渲染大量数据时能更加合理、高效。</span><br></pre></td></tr></table></figure>

<h4 id="3、为什么采用虚拟dom"><a href="#3、为什么采用虚拟dom" class="headerlink" title="3、为什么采用虚拟dom?"></a>3、为什么采用虚拟dom?</h4><p>1、跨平台性</p>
<p>因为虚拟dom是以javascript对象为基础并不依赖真实的平台环境，所以他就有了很强的跨平台能力</p>
<p>2、操作javascript要远比直接操作dom的效率高</p>
<p>众所周知，dom操作的执行速度要远远低于javascript的运算速度，因为dom操作要涉及到重绘和重排，相对来说会消耗较长的渲染时间。而虚拟dom其实就是以js为基础对象树，将新旧dom的对比操作放到js层面，利用patching算法得到真正需要更新的节点，最大限度的减少dom操作，可以显著的提升渲染性能。<br>且虚拟dom的优势更体现在大量数据且频繁的操作情况，能更合理、高效的对视图进行更新</p>
<p>3、</p>
<h4 id="4、diff算法的基本原理"><a href="#4、diff算法的基本原理" class="headerlink" title="4、diff算法的基本原理"></a>4、diff算法的基本原理</h4><h3 id="三、函数式组件"><a href="#三、函数式组件" class="headerlink" title="三、函数式组件"></a>三、函数式组件</h3><h3 id="四、插槽slot的使用"><a href="#四、插槽slot的使用" class="headerlink" title="四、插槽slot的使用"></a>四、插槽slot的使用</h3><h3 id="五、浅析async-await"><a href="#五、浅析async-await" class="headerlink" title="五、浅析async/await"></a>五、浅析async/await</h3><p>async和await其实可以说是Promise的一对语法糖。<br>async函数，顾名思义，其就是用async关键字声明的函数，且只有被async声明的函数内部才允许使用await关键字。</p>
<h4 id="1、async函数做了什么？"><a href="#1、async函数做了什么？" class="headerlink" title="1、async函数做了什么？"></a>1、async函数做了什么？</h4><p>async函数与普通函数的区别在哪里呢？也就是说async具体做了些什么呢？这里我们先给出一个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">calcNum</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello async'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> result = calcNum()</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure>
<p>通过代码运行结果我们可以看到：输出的是一个Promise对象<br>由此可知，async函数与普通函数的区别就在于它将函数返回的值通过Promise.resolve()方法封装成了Promise对象</p>
<h4 id="2、await关键字是做什么的？"><a href="#2、await关键字是做什么的？" class="headerlink" title="2、await关键字是做什么的？"></a>2、await关键字是做什么的？</h4><p>await顾名思义就是等待的意思，一般后面放置一个表达式，可以是Promise对象，也可以是普通值，但即便是普通值，await也会将其转换为已正常处理的Promise,然后等待其处理结果。</p>
<blockquote>
<p>具体作用：await会暂停当前async函数的执行，等待promise的处理完成。若Promise正常处理（即状态变更为fulfilled）,其回调的resolve函数参数将 作为await表达式的值，然后继续执行async函数。<br>若Promise处理异常，await表达式会将Promise的异常原因抛出</p>
</blockquote>
<p>以上也解释了为什么如果await关键字后的表达式的值如果不是一个Promise，则返回值即是它本身。因为await会将其转换成Promise，然后再正常处理，最终还是其本身</p>
<p>人，都是有惰性的。停留在安逸的环境中，就会变得越来越慵懒。<br>自制力说实话，自己其实很差劲，一些事情，一旦开了口子，就很难刹住闸。就比如说日常作息。早些年还年轻，挺能熬，但也维持在1点之前休息；年前一段时间，有次无意到了2点才睡，接下来一段时间，每当想睡觉时，一看时间还没到两点，就想着再墨迹一会儿，就这样在一段时间内就一直持续着突破两点。而在前天晚上，因为新下了一款英灵殿的游戏，所以玩得入迷了点，结果就一直玩到了三点过后才睡。而昨天晚上，本来计划着睡早一点，但不知不觉间，就又玩到了三点，甚至将近四点。就好像原本一道密不透风的城墙，一旦撕开了一道口子，就随着狂风的肆虐，那道口子就越来越大，也越难以修补。<br>但是，真的是无法修补吗？人，是有选择的，明白了道理是一回事，明白了就去纠正，去做，其实是相互衔接的另一档子事，大多数人以为某些原因把他们分开了，其实任何事情都有补救的方法，我们不期望能让其恢复如初，但求能让此心无愧。<br>好了，就看你接下来怎么去做了，别人事情停留在口头的我懂了，知道了。<br>龙有逆鳞，触之必死。龙神以己身压制烛龙帝君，并用逆鳞将其封印在葬龙涧内,慢慢化去其肉身及灵魂。</p>
<p>简单地说，函数式组件其实是一个简单的组件，它没有生命周期</p>
<p>diff算法的核心就是：查找并比较新旧vnode的不同，<br>我劝天公重抖擞，不拘一格降人才。<br>好吧，我承认我还是困了，昨晚没有按预料的那么晚睡，但也只是提前到2点之前。<br>这是为什么呢，一摸手机，瞬间大脑有那么的清醒，一盯上电脑，就是如潮般的睡意<br>所以，人生不将就。我不敢说，TNT,话剧社，岁岁年年，花开两季，真的是困啊，只要精神一放空，瞬间困意汹涌<br>无可救药，话不投机半句多。好像你一言我一语，时间就如炎炎烈日下的冰雪般，刹那消融<br>好像在板着指头数着秒针在度过，<br>风烟望五津，半点不由人<br>我的家在河套平原<br>车房，婚姻，人之宿命，不争一时之长短，又有云：只争朝夕，<br>面对选择，不能重来，故天将降大任于斯人也，必先苦其心志，劳其筋骨，空乏其身，行拂乱其所为，<br>酒逢知己千杯少<br>西出阳关无故人<br>不知道，你可曾来过<br>看江湖，不知是故人<br>明月别枝惊鹊，清风半夜鸣蝉，稻花香里说丰年，听取蛙声一片。<br>七八个星天外，两三点雨山前，旧时茅店社林边，路转溪头忽见。<br>白仙儿舒展了下双臂，眯着眼瞥向对面的秦书，不无挑衅意味地道：怎么样，要不咱们来过几招？<br>话音一落，周遭登时一片起哄的声音，<br>众所周知，朱雀书院在九州九院内近年来总是位于倒数位置，连年被其他书院压了一头。这点一直让朱雀学院的师生乃至朱雀谷谷主备受诟病。<br>如今白仙儿作为白虎殿弟子，来朱雀学院交流的背景下，就这样向本学院学子挑衅，不引起众怒才怪。</p>
<p>天山神仙三百万，见我亦需尽低眉。    环海浮沉，</p>
<p>花样年华，松江一霸.松花江上人犹在，不见博日袭远山。花海浮薄日，长空挽清秋</p>
<p>感觉好困啊，一看东西就困，但一摸手机就脑海一片清明<br>这种习惯仿佛是病态的，只要是看一些学习性质的技术文，就会产生昏昏欲睡的赶脚。也不知道是不是正常<br>其实呢，只是想静静的学习点东西而已啊<br>三两春秋，半斤昆仑。谁言寸草心<br>如果不做点什么，那困意就会步步紧逼，</p>
<p>莫听穿林打叶声，何妨吟啸且徐行。竹杖芒鞋轻胜马，谁怕？一蓑烟雨任平生。</p>
<p>料峭春风吹酒醒，微冷，山头斜照却相迎。回首向来萧瑟处，归去，也无风雨也无晴。</p>
<p>倦来不觉秋易冷，闲惹河柳满清塘。<br>且听，暖风三月话残冬。<br>倦来提笔描风声，</p>
<p>n5g@   个税</p>
</div><div class="tags"><a href="/tags/VUE/"><i class="fa fa-tag"></i>VUE</a></div><div class="post-nav"><a class="pre" href="/2021/03/08/%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%8F%8A%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E5%89%96%E6%9E%90/">作用域及作用域链相关知识剖析</a><a class="next" href="/2020/12/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%B8%A9%E5%9D%91%E5%AE%9E%E5%BD%95/">小程序踩坑实录</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://inkrhyme.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ES6/">ES6</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/VUE/">VUE</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8E%9F%E7%94%9FJS/">原生JS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%97%B2%E6%95%A3%E5%B0%8F%E8%AE%B0/">闲散小记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/SpreadJS/" style="font-size: 15px;">SpreadJS</a> <a href="/tags/VUE/" style="font-size: 15px;">VUE</a> <a href="/tags/%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85/" style="font-size: 15px;">组件封装</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size: 15px;">数组</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 15px;">随笔</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/%E5%91%BD%E4%BB%A4/" style="font-size: 15px;">命令</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 15px;">正则表达式</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/%E7%BB%84%E4%BB%B6/" style="font-size: 15px;">组件</a> <a href="/tags/spreadjs/" style="font-size: 15px;">spreadjs</a> <a href="/tags/SpreadJs/" style="font-size: 15px;">SpreadJs</a> <a href="/tags/TypeScript/" style="font-size: 15px;">TypeScript</a> <a href="/tags/%E4%BD%9C%E7%94%A8%E5%9F%9F/" style="font-size: 15px;">作用域</a> <a href="/tags/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE/" style="font-size: 15px;">作用域链</a> <a href="/tags/%E5%8F%98%E9%87%8F/" style="font-size: 15px;">变量</a> <a href="/tags/element/" style="font-size: 15px;">element</a> <a href="/tags/%E4%B8%BB%E9%A2%98%E8%89%B2/" style="font-size: 15px;">主题色</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 15px;">小程序</a> <a href="/tags/MPVUE/" style="font-size: 15px;">MPVUE</a> <a href="/tags/nrm/" style="font-size: 15px;">nrm</a> <a href="/tags/%E9%95%9C%E5%83%8F%E6%BA%90/" style="font-size: 15px;">镜像源</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/04/09/%E5%89%8D%E7%AB%AF%E5%B8%B8%E8%A7%81%E6%9C%AF%E8%AF%AD%E6%B5%85%E6%9E%90/">前端常见术语浅析</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/08/%E6%BC%AB%E8%B0%88MVVM/">漫谈MVVM框架</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/09/vue%E4%B9%8Bdiff%E7%AE%97%E6%B3%95/">vue之diff算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/08/%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%8F%8A%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E5%89%96%E6%9E%90/">作用域及作用域链相关知识剖析</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/02/19/VUE%E5%8E%9F%E7%90%86%E9%9B%86%E9%94%A6/">VUE原理集锦</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/12/04/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%B8%A9%E5%9D%91%E5%AE%9E%E5%BD%95/">小程序踩坑实录</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/09/04/eventbus%E5%9C%A8typescript%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9F%8B%E5%9D%91/">EventBus在typescript中的使用埋坑</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/15/nginx%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/">nginx之常用指令</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/12/%E7%96%91%E9%9A%BE%E9%81%AD%E9%81%87%E8%AE%B0%E5%BD%95%E8%B4%B4/">疑难遭遇记录贴</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/06/11/%E5%AE%9A%E5%88%B6element-ui%E4%B8%BB%E9%A2%98%E8%89%B2%E5%8D%B3%E6%97%B6%E5%88%87%E6%8D%A2%E5%8A%9F%E8%83%BD/">定制element-ui主题色即时切换功能</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">墨韵.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>